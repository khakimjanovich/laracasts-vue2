<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" rel="stylesheet">
    <style>
        .correct {
            color: green;
        }

        .incorrect {
            color: red;
            text-decoration: underline;
        }

        .no-select {
            -webkit-touch-callout: none; /* iOS Safari */
            -webkit-user-select: none; /* Safari */
            -moz-user-select: none; /* Old versions of Firefox */
            -ms-user-select: none; /* Internet Explorer/Edge */
            user-select: none; /* Non-prefixed version, currently supported by Chrome, Edge, Opera and Firefox */
        }
    </style>
</head>
<body>

<div id="root" class="container-fluid my-5 pt-5 px-5">
    <div class="row justify-content-center px-4">
        <div class="col-md-12 col-lg-9">
            <div class="card shadow-sm p-4">
                <table class="table ">
                    <thead>
                    <tr>
                        <th scope="col">
                            <h1 class="no-select" v-model="quote">
                            </h1>
                        </th>
                        <th scope="col">
                            <p v-text="timer">0</p>
                        </th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <th scope="row">
                            <input class="form-control " @keyup="keyPressed" type="text">
                        </th>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<script src="https://unpkg.com/vue@2.6.14/dist/vue.js"></script>

<script>
    let app = new Vue({
        el: '#root',
        data: {
            quote: '',
            timer: 23,
        },
        methods: {
            keyPressed(font, text) {
                alert('Clicked')
            },
            fetchQuote() {
                return fetch('https://api.quotable.io/random')
                    .then(response => response.json())
                    .then(data => data.content);
            },
            async addQuoteToDom() {
                this.quote.innerText = '';
                let word = await this.fetchQuote()
                word.split('').forEach(char => {
                    let span = document.createElement('span')
                    span.innerText = char
                    this.quote.appendChild(span)
                })
            }
        },
        mounted() {
            this.addQuoteToDom();

            // const RANDOM_QUOTE_API_URL = 'https://api.quotable.io/random';
            // const word = document.getElementById("word");
            // const timer = document.getElementById('timer');
            // const input = document.getElementById("input");

            // input.focus();

            // function getRandomQuote() {
            //     return fetch(RANDOM_QUOTE_API_URL)
            //         .then(response => response.json())
            //         .then(data => data.content);
            // }

            // async function addWordToDOM() {
            //     const quote = await getRandomQuote();
            //     word.innerHTML = '';
            //
            //     quote.split('').forEach(character => {
            //         const characterSpan = document.createElement('span')
            //         characterSpan.innerText = character
            //         word.appendChild(characterSpan);
            //     })
            //
            //     input.value = null;
            //     startTimer();
            // }
            //
            // let startTime
            //
            // function startTimer() {
            //     timer.innerText = 0;
            //     startTime = new Date()
            //     setInterval(() => {
            //         timer.innerText = getTimerTime().toString()
            //     }, 1000)
            // }
            //
            // function getTimerTime() {
            //     return Math.floor((new Date() - startTime) / 1000)
            // }
            //
            // function addWordAndCheckIt() {
            //     addWordToDOM();
            // }
            //
            // addWordAndCheckIt()
            //
            // input.addEventListener("input", (e) => {
            //     const quoteArray = word.querySelectorAll('span');
            //     const Value = input.value.split('')
            //
            //     let correct = true;
            //     quoteArray.forEach((characterSpan, index) => {
            //         const character = Value[index]
            //
            //         if (character === undefined) {
            //             correct = false;
            //             characterSpan.classList.remove('correct');
            //             characterSpan.classList.remove('incorrect');
            //
            //         } else if (character === characterSpan.innerText) {
            //             if (correct) {
            //                 characterSpan.classList.add('correct');
            //                 characterSpan.classList.remove('incorrect');
            //                 input.classList.remove('bg-danger')
            //                 input.classList.remove('text-dark')
            //             } else {
            //                 characterSpan.classList.remove('correct');
            //                 characterSpan.classList.add('incorrect');
            //                 input.classList.add('bg-danger')
            //                 input.classList.add('text-dark')
            //             }
            //
            //         } else {
            //             correct = false;
            //             characterSpan.classList.remove('correct');
            //             characterSpan.classList.add('incorrect');
            //             input.classList.add('bg-danger')
            //             input.classList.add('text-dark')
            //         }
            //     })
            //     if (correct) {
            //         alert('Sizning tezligingiz daqiqasiga: ' + Math.floor((quoteArray.length / 5) / (timer.innerText / 60)) + ' ta so\'z')
            //         addWordToDOM();
            //     }
            // });
        }
    })
</script>
</body>
</html>
